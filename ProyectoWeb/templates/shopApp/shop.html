
{% extends "base.html" %}  <!--  con esta instruccion insertamos la plantilla base.html -->

{% load static %} <!--  cargamos todo lo que tengamos en la carpeta static -->

{% block content %} <!--  etiq de apertura de los contenido exclusivos del home -->

<!-- CONTENIDO EXCLUSIVO DE SHOP -->

<!-- le introducimos una etq style. esto es puede ahcer tambien en la hoja de estilos externa gestion.css -->
<style> 
    #tarjetaShop:hover {scale: 1.12; transition: all 0.3s}
</style>


<div class="container">


    <div class=" mt-5 text-light">
        <p class="lead"> Bienvenid@ a la tienda! </p>
        <p>Esta es nuestra sección mas especial. Disfruta de todos nuestros productos...</p>
        <hr style= " border-color: white" >
    </div>

    <!--  FILTRAR POR CATEGORIAS:  aparecen todas las categorías en la parte superior de la pantalla para filtrar -->
        <p style="display: inline; color:white"> Filtrar por categorias:</p>

        {% for c in lista_categorias %}   
            <a href="{% url 'FiltroCategoriaShop' c.nombre %}"><span class ="badge badge-pill badge-primary"> {{ c.nombre }}</span></a>
        {% endfor %}
        <hr><hr>
    <!--  FIN FILTRO POR CATEGORIAS -->

    <div style="float:right"> <!-- agrego el template carro.html -->
        {% if request.user.is_authenticated %}
            {% include "carro.html" %}
        {%else%} 
            <a href="{% url 'Login' %}" class="btn btn-danger btn-lg mt-3" >INICIA SESION para ver el carro</a> 
        {%endif%} 
    </div>



    <div class="row"> <!-- fila donde se almacenan los artículos -->

        {% for i in lista_productos %}
        <div class="col-md-4" > <!-- le ponemos un ancho de 4 columnas, para que cada imagen ocupe 4 columnas => habra 3 imagenes -->
            <div class="card " style="margin: 15px 15px" id="tarjetaShop"> <!-- abrimos el elemento card donde estarán los productos -->
                <img src="{{ i.imagen.url }}" class="card-img-top" style="height: 6cm; width:auto">
                <div class="card-body text-center"><!-- cargo un card-body para meterle el texto a la tarjeta card -->
                    <!-- se añade el nombre. Se ha creado un link que lleva al template descripcion -->
                    <h6 class="card-title text-center"> 
                        <a href="{% url 'DescripcionProductoShop' i.nombre %}"> {{i.nombre}}</a>
                    </h6>       
                    <!-- se añade la categoria -->
                        <a href="{% url 'FiltroCategoriaShop' i.categorias %}" class="text-center"><span class ="badge badge-pill badge-primary  "> {{ i.categorias}}</span></a>
                    <p class="card-text text-center" >   {{i.precio | floatformat:2}}€</p> <!-- floatformat es para poner siempre dos decimales -->
                </div>
                <div class ="clard-footer text-center"><!-- se mete el botton en el card-footer -->
                    {% if i.disponibilidad %}
                    <a href="{% url 'Carro:Agregar' i.id %}" class="btn btn-warning" style="margin-bottom: 10px;"> Agregar a la cesta</a>
                    {% else %}
                        <p style="color:red"> fuera de stock</p>
                    {%endif%}
                </div>

            </div>
        </div>
        {% endfor %}

    </div>
</div> 
    
<!--  FIN DEL CONTENIDO EXCLUSIVO DE SHOP -->

{% endblock %}